<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Compare performance of model between training and test set — training_test_comparison • DALEXtra</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- dalexverse --><link href="../dalexverse.css" rel="stylesheet"><link href="../dalexverse-2.css" rel="stylesheet"><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Compare performance of model between training and test set — training_test_comparison"><meta property="og:description" content="Function training_test_comparison calculates performance of the provided model based on specified measure function.
Response of the model is calculated based on test data, extracted from the explainer and training data, provided by the user.
Output can be easily shown with print or plot function."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- google analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-5650686-14"></script><script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-5650686-14');
</script></head><body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">DALEXtra</a>
        <div class="info">
          <span class="partof">part of the <a href="https://github.com/ModelOriented/DrWhy" class="external-link">DrWhy.AI</a>
           developed by the <a href="https://mi2.mini.pw.edu.pl/" class="external-link">MI^2 DataLab</a> </span>
          <span class="version version-default">2.2.1</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/ModelOriented/DALEXtra/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Compare performance of model between training and test set</h1>
    <small class="dont-index">Source: <a href="https://github.com/ModelOriented/DALEXtra/blob/HEAD/R/training_test_comparison.R" class="external-link"><code>R/training_test_comparison.R</code></a></small>
    <div class="hidden name"><code>trainig_test_comparison.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Function <code>training_test_comparison</code> calculates performance of the provided model based on specified measure function.
Response of the model is calculated based on test data, extracted from the explainer and training data, provided by the user.
Output can be easily shown with <code>print</code> or <code>plot</code> function.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">training_test_comparison</span><span class="op">(</span>
  <span class="va">champion</span>,
  <span class="va">challengers</span>,
  <span class="va">training_data</span>,
  <span class="va">training_y</span>,
  measure_function <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>champion</dt>
<dd><p>- explainer of champion model.</p></dd>
<dt>challengers</dt>
<dd><p>- explainer of challenger model or list of explainers.</p></dd>
<dt>training_data</dt>
<dd><p>- data without target column that will be passed to predict function and then to measure function. Keep in mind that
they have to differ from data passed to an explainer.</p></dd>
<dt>training_y</dt>
<dd><p>- target column for <code>training_data</code></p></dd>
<dt>measure_function</dt>
<dd><p>- measure function that calculates performance of model based on true observation and prediction.
Order of parameters is important and should be (y, y_hat). By default it is RMSE.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>An object of the class <code>training_test_comparison</code>.
It is a named list containing:</p><ul><li><p><code>data</code> data.frame with following columns</p><ul><li><p><code>measure_test</code> performance on test set</p></li>
<li><p><code>measure_train</code> performance on training set</p></li>
<li><p><code>label</code> label of explainer</p></li>
<li><p><code>type</code> flag that indicates if explainer was passed as champion or as challenger.</p></li>
</ul></li>
<li><p><code>models_info</code> data.frame containing information about models used in analysis</p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://mlr.mlr-org.com" class="external-link">"mlr"</a></span><span class="op">)</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://ModelOriented.github.io/DALEXtra/" class="external-link">"DALEXtra"</a></span><span class="op">)</span></span>
<span class="r-in"><span class="va">task</span> <span class="op">&lt;-</span> <span class="fu">mlr</span><span class="fu">::</span><span class="fu"><a href="https://mlr.mlr-org.com/reference/RegrTask.html" class="external-link">makeRegrTask</a></span><span class="op">(</span></span>
<span class="r-in"> id <span class="op">=</span> <span class="st">"R"</span>,</span>
<span class="r-in">  data <span class="op">=</span> <span class="va">apartments</span>,</span>
<span class="r-in">   target <span class="op">=</span> <span class="st">"m2.price"</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"> <span class="va">learner_lm</span> <span class="op">&lt;-</span> <span class="fu">mlr</span><span class="fu">::</span><span class="fu"><a href="https://mlr.mlr-org.com/reference/makeLearner.html" class="external-link">makeLearner</a></span><span class="op">(</span></span>
<span class="r-in"> <span class="st">"regr.lm"</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"><span class="va">model_lm</span> <span class="op">&lt;-</span> <span class="fu">mlr</span><span class="fu">::</span><span class="fu"><a href="https://mlr.mlr-org.com/reference/train.html" class="external-link">train</a></span><span class="op">(</span><span class="va">learner_lm</span>, <span class="va">task</span><span class="op">)</span></span>
<span class="r-in"><span class="va">explainer_lm</span> <span class="op">&lt;-</span> <span class="fu"><a href="explain_mlr.html">explain_mlr</a></span><span class="op">(</span><span class="va">model_lm</span>, <span class="va">apartmentsTest</span>, <span class="va">apartmentsTest</span><span class="op">$</span><span class="va">m2.price</span>, label <span class="op">=</span> <span class="st">"LM"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Preparation of a new explainer is initiated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; model label       :  LM </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; data              :  9000  rows  6  cols </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; target variable   :  9000  values </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; predict function  :  yhat.WrappedModel  will be used ( <span style="color: #BBBB00;"> default </span> )</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; predicted values  :  No value for predict function target column. ( <span style="color: #BBBB00;"> default </span> )</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; model_info        :  package mlr , ver. 2.19.0 , task regression ( <span style="color: #BBBB00;"> default </span> ) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; predicted values  :  numerical, min =  1792.597 , mean =  3506.836 , max =  6241.447  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; residual function :  difference between y and yhat ( <span style="color: #BBBB00;"> default </span> )</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; residuals         :  numerical, min =  -257.2555 , mean =  4.687686 , max =  472.356  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  <span style="color: #00BB00;"> A new explainer has been created! </span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="va">learner_rf</span> <span class="op">&lt;-</span> <span class="fu">mlr</span><span class="fu">::</span><span class="fu"><a href="https://mlr.mlr-org.com/reference/makeLearner.html" class="external-link">makeLearner</a></span><span class="op">(</span></span>
<span class="r-in"><span class="st">"regr.ranger"</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"><span class="va">model_rf</span> <span class="op">&lt;-</span> <span class="fu">mlr</span><span class="fu">::</span><span class="fu"><a href="https://mlr.mlr-org.com/reference/train.html" class="external-link">train</a></span><span class="op">(</span><span class="va">learner_rf</span>, <span class="va">task</span><span class="op">)</span></span>
<span class="r-in"><span class="va">explainer_rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="explain_mlr.html">explain_mlr</a></span><span class="op">(</span><span class="va">model_rf</span>, <span class="va">apartmentsTest</span>, <span class="va">apartmentsTest</span><span class="op">$</span><span class="va">m2.price</span>, label <span class="op">=</span> <span class="st">"RF"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Preparation of a new explainer is initiated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; model label       :  RF </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; data              :  9000  rows  6  cols </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; target variable   :  9000  values </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; predict function  :  yhat.WrappedModel  will be used ( <span style="color: #BBBB00;"> default </span> )</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; predicted values  :  No value for predict function target column. ( <span style="color: #BBBB00;"> default </span> )</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; model_info        :  package mlr , ver. 2.19.0 , task regression ( <span style="color: #BBBB00;"> default </span> ) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; predicted values  :  numerical, min =  1796.05 , mean =  3504.648 , max =  6277.081  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; residual function :  difference between y and yhat ( <span style="color: #BBBB00;"> default </span> )</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; residuals         :  numerical, min =  -543.5345 , mean =  6.875086 , max =  741.3677  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  <span style="color: #00BB00;"> A new explainer has been created! </span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="va">learner_gbm</span> <span class="op">&lt;-</span> <span class="fu">mlr</span><span class="fu">::</span><span class="fu"><a href="https://mlr.mlr-org.com/reference/makeLearner.html" class="external-link">makeLearner</a></span><span class="op">(</span></span>
<span class="r-in"><span class="st">"regr.gbm"</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"><span class="va">model_gbm</span> <span class="op">&lt;-</span> <span class="fu">mlr</span><span class="fu">::</span><span class="fu"><a href="https://mlr.mlr-org.com/reference/train.html" class="external-link">train</a></span><span class="op">(</span><span class="va">learner_gbm</span>, <span class="va">task</span><span class="op">)</span></span>
<span class="r-in"><span class="va">explainer_gbm</span> <span class="op">&lt;-</span> <span class="fu"><a href="explain_mlr.html">explain_mlr</a></span><span class="op">(</span><span class="va">model_gbm</span>, <span class="va">apartmentsTest</span>, <span class="va">apartmentsTest</span><span class="op">$</span><span class="va">m2.price</span>, label <span class="op">=</span> <span class="st">"GBM"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Preparation of a new explainer is initiated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; model label       :  GBM </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; data              :  9000  rows  6  cols </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; target variable   :  9000  values </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; predict function  :  yhat.WrappedModel  will be used ( <span style="color: #BBBB00;"> default </span> )</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; predicted values  :  No value for predict function target column. ( <span style="color: #BBBB00;"> default </span> )</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; model_info        :  package mlr , ver. 2.19.0 , task regression ( <span style="color: #BBBB00;"> default </span> ) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; predicted values  :  numerical, min =  2130.026 , mean =  3503.828 , max =  6053.878  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; residual function :  difference between y and yhat ( <span style="color: #BBBB00;"> default </span> )</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; residuals         :  numerical, min =  -527.0265 , mean =  7.695752 , max =  743.8902  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  <span style="color: #00BB00;"> A new explainer has been created! </span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">training_test_comparison</span><span class="op">(</span><span class="va">explainer_lm</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">explainer_gbm</span>, <span class="va">explainer_rf</span><span class="op">)</span>,</span>
<span class="r-in">                                 training_data <span class="op">=</span> <span class="va">apartments</span>,</span>
<span class="r-in">                                 training_y <span class="op">=</span> <span class="va">apartments</span><span class="op">$</span><span class="va">m2.price</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span class="r-plt img"><img src="trainig_test_comparison-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p>Developed by .</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>.</p>
</div>

      </footer></div>

  


  </body></html>

